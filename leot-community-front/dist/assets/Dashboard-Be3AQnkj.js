import{d as q,u as H,a as J,r as I,v as K,c as u,e as n,o as i,f as s,g as e,x as r,w as l,i as a,j as L,y as O,z as _,m as c,A as P,B as M,C as U,D as j,F as Q,G as W,_ as X}from"./index-fmth1Foz.js";import{u as Z}from"./bagu-CFlVxt4r.js";import"./question-DUAdpd1i.js";const ss={class:"tech-page dashboard"},ts={class:"dashboard__container"},as={class:"dashboard__profile"},es={class:"profile-card glass"},os={class:"profile-card__header"},ls={class:"profile-card__avatar"},_s={key:0,class:"profile-card__badge"},ds={class:"profile-card__info"},is={class:"gradient-text"},ns={class:"profile-card__account"},rs={class:"profile-card__bio"},cs={class:"dashboard__stats"},us={class:"stat-card__icon"},ps={class:"stat-card__content"},fs={class:"stat-card__value"},vs={class:"stat-card__icon"},ms={class:"stat-card__content"},gs={class:"stat-card__value"},bs={class:"stat-card__icon admin"},hs={class:"dashboard__details glass"},ks={class:"details__title"},Cs={class:"details__grid"},ys={class:"details__item"},zs={class:"details__value"},Ss={class:"details__item"},Bs={class:"details__value"},Ds={class:"details__item"},Ts={class:"details__value"},xs={class:"details__item"},As={class:"details__value"},Ns={key:0,class:"details__item"},ws={class:"details__value"},Rs={key:1,class:"details__item"},Vs={class:"details__value"},Fs={class:"dashboard__actions"},$s=q({__name:"Dashboard",setup(Is){const p=H(),o=J(),m=Z(),E=I(0),g=I(0);K(async()=>{!o.user&&o.token&&await o.initUser(),await m.fetchBanks({current:1,pageSize:1}),g.value=m.total});const b=f=>{if(!f)return"";const t=new Date(f);return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`},h=()=>p.push("/bagu"),k=()=>p.push("/bagu/favourites"),C=()=>p.push("/admin/bagu");return(f,t)=>{var y,z,S,B,D,T,x,A,N,w,R,V,F;const d=u("el-icon"),G=u("el-avatar"),Y=u("el-tag"),v=u("el-button");return i(),n("div",ss,[s("div",ts,[s("div",as,[s("div",es,[s("div",os,[s("div",ls,[e(G,{size:80},{default:l(()=>[e(d,{size:40},{default:l(()=>[e(a(L))]),_:1})]),_:1}),((y=a(o).user)==null?void 0:y.userRole)==="admin"?(i(),n("div",_s,[e(d,null,{default:l(()=>[e(a(O))]),_:1})])):r("",!0)]),s("div",ds,[s("h1",is,_(((z=a(o).user)==null?void 0:z.userName)||"用户"),1),s("p",ns,"账号："+_((S=a(o).user)==null?void 0:S.userAccount),1),e(Y,{type:((B=a(o).user)==null?void 0:B.userRole)==="admin"?"danger":"primary",effect:"dark",class:"profile-card__role"},{default:l(()=>{var $;return[c(_((($=a(o).user)==null?void 0:$.userRole)==="admin"?"管理员":"普通用户"),1)]}),_:1},8,["type"])])]),s("div",rs,[e(d,null,{default:l(()=>[e(a(P))]),_:1}),s("span",null,_(((D=a(o).user)==null?void 0:D.profile)||"这个人很懒，什么都没写~"),1)])])]),s("div",cs,[s("div",{class:"stat-card glass",onClick:k},[s("div",us,[e(d,{size:32},{default:l(()=>[e(a(M))]),_:1})]),s("div",ps,[s("span",fs,_(E.value),1),t[0]||(t[0]=s("span",{class:"stat-card__label"},"我的收藏",-1))])]),s("div",{class:"stat-card glass",onClick:h},[s("div",vs,[e(d,{size:32},{default:l(()=>[e(a(U))]),_:1})]),s("div",ms,[s("span",gs,_(g.value),1),t[1]||(t[1]=s("span",{class:"stat-card__label"},"题库数量",-1))])]),a(o).isAdmin()?(i(),n("div",{key:0,class:"stat-card glass",onClick:C},[s("div",bs,[e(d,{size:32},{default:l(()=>[e(a(j))]),_:1})]),t[2]||(t[2]=s("div",{class:"stat-card__content"},[s("span",{class:"stat-card__label"},"管理后台"),s("span",{class:"stat-card__hint"},"点击进入")],-1))])):r("",!0)]),s("div",hs,[s("h2",ks,[e(d,null,{default:l(()=>[e(a(Q))]),_:1}),t[3]||(t[3]=c(" 账户信息 ",-1))]),s("div",Cs,[s("div",ys,[t[4]||(t[4]=s("span",{class:"details__label"},"用户ID",-1)),s("span",zs,_((T=a(o).user)==null?void 0:T.id),1)]),s("div",Ss,[t[5]||(t[5]=s("span",{class:"details__label"},"用户名",-1)),s("span",Bs,_((x=a(o).user)==null?void 0:x.userName),1)]),s("div",Ds,[t[6]||(t[6]=s("span",{class:"details__label"},"账号",-1)),s("span",Ts,_((A=a(o).user)==null?void 0:A.userAccount),1)]),s("div",xs,[t[7]||(t[7]=s("span",{class:"details__label"},"角色",-1)),s("span",As,_(((N=a(o).user)==null?void 0:N.userRole)==="admin"?"管理员":"普通用户"),1)]),(w=a(o).user)!=null&&w.createTime?(i(),n("div",Ns,[t[8]||(t[8]=s("span",{class:"details__label"},"注册时间",-1)),s("span",ws,_(b((R=a(o).user)==null?void 0:R.createTime)),1)])):r("",!0),(V=a(o).user)!=null&&V.updateTime?(i(),n("div",Rs,[t[9]||(t[9]=s("span",{class:"details__label"},"更新时间",-1)),s("span",Vs,_(b((F=a(o).user)==null?void 0:F.updateTime)),1)])):r("",!0)])]),s("div",Fs,[e(v,{class:"action-btn gradient-btn",size:"large",onClick:h},{default:l(()=>[e(d,null,{default:l(()=>[e(a(U))]),_:1}),t[10]||(t[10]=c(" 浏览题库 ",-1))]),_:1}),e(v,{class:"action-btn",size:"large",onClick:k},{default:l(()=>[e(d,null,{default:l(()=>[e(a(M))]),_:1}),t[11]||(t[11]=c(" 我的收藏 ",-1))]),_:1}),a(o).isAdmin()?(i(),W(v,{key:0,class:"action-btn",size:"large",onClick:C},{default:l(()=>[e(d,null,{default:l(()=>[e(a(j))]),_:1}),t[12]||(t[12]=c(" 管理后台 ",-1))]),_:1})):r("",!0)])])])}}}),Es=X($s,[["__scopeId","data-v-1fb3c060"]]);export{Es as default};
